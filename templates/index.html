<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenManus</title>
    <meta name="description" content="OpenManus - Your AI assistant for complex tasks">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="side-panel">
            <div class="side-panel-header">
                <!-- Potential Logo Area -->
            </div>

            <!-- Sidebar Navigation -->
            <div class="sidebar-nav">
                <button class="sidebar-btn new-task-btn" onclick="startNewTask()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                    Nouvelle tâche
                </button>
                <div class="nav-divider"></div>
                <button class="sidebar-btn" onclick="openSearch()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                    Rechercher
                </button>
                 <button class="sidebar-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                    </svg>
                    Bibliothèque
                </button>
            </div>

            <!-- Task History -->
            <div class="history-label">Récents</div>
            <div class="history-panel">
                <div id="task-list" class="task-list"></div>
            </div>

            <!-- Sidebar Footer -->
            <div class="set-config-panel">
                <button id="config-button" class="sidebar-result-btn" title="Configuration Settings">
                   <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                    Réglages
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-panel">
            <div id="task-container" class="task-container">
                <!-- Welcome Screen -->
                <div class="welcome-message">
                    <h1>Que souhaitez-vous accomplir ?</h1>

                    <!-- Suggestion Chips -->
                    <div class="suggestions">
                        <button class="suggestion-chip" onclick="usePrompt('Créer des diapositives')">
                            Créer des diapositives
                        </button>
                        <button class="suggestion-chip" onclick="usePrompt('Créer un site web')">
                            Créer un site web
                        </button>
                        <button class="suggestion-chip" onclick="usePrompt('Développer une application')">
                            Développer une application
                        </button>
                         <button class="suggestion-chip" onclick="usePrompt('Analyser des données')">
                            Analyser des données
                        </button>
                    </div>
                </div>

                <!-- Log Container for Steps -->
                <div id="log-container" class="step-container"></div>
            </div>

            <!-- Input Container -->
            <div id="input-container" class="input-container">
                <div class="input-wrapper">
                    <div class="input-box">
                        <textarea
                            id="prompt-input"
                            placeholder="Décrivez votre tâche..."
                            rows="1"
                            oninput="this.style.height = ''; this.style.height = this.scrollHeight + 'px'"
                            onkeydown="if(event.keyCode === 13 && !event.shiftKey) { event.preventDefault(); createTask(); }"
                        ></textarea>
                        <button onclick="createTask()" class="send-btn" aria-label="Envoyer">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 19V5M5 12l7-7 7 7"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Configuration Modal -->
    <div id="config-modal" class="config-modal">
        <div class="config-modal-content">
            <div class="config-modal-header">
                <h2>Configuration système</h2>
                <p>Configurez les paramètres nécessaires pour utiliser le système</p>
                <span class="close-modal">&times;</span>
            </div>

            <div class="config-modal-body">
                <div class="note-box">
                    <p>Assurez-vous que les informations de configuration sont correctes.</p>
                    <p>Si vous n'avez pas de clé API, obtenez-en une auprès de votre fournisseur.</p>
                </div>

                <div class="config-section">
                    <h3>Configuration LLM</h3>
                    <div class="form-group">
                        <label for="llm-model">Nom du modèle <span class="required-mark">*</span></label>
                        <input type="text" id="llm-model" name="llm.model" placeholder="Ex: claude-3-5-sonnet">
                    </div>
                    <div class="form-group">
                        <label for="llm-base-url">URL de base API <span class="required-mark">*</span></label>
                        <input type="text" id="llm-base-url" name="llm.base_url" placeholder="Ex: https://api.openai.com/v1">
                    </div>
                    <div class="form-group">
                        <label for="llm-api-key">Clé API <span class="required-mark">*</span></label>
                        <input type="password" id="llm-api-key" name="llm.api_key" placeholder="Votre clé API: sk-...">
                        <span class="field-help">Doit être votre propre clé API valide</span>
                    </div>
                    <div class="form-group">
                        <label for="llm-max-tokens">Tokens maximum</label>
                        <input type="number" id="llm-max-tokens" name="llm.max_tokens" placeholder="Ex: 4096">
                    </div>
                    <div class="form-group">
                        <label for="llm-temperature">Température</label>
                        <input type="number" id="llm-temperature" name="llm.temperature" step="0.1" placeholder="Ex: 0.0">
                    </div>
                </div>

                <div class="config-section">
                    <h3>Configuration serveur</h3>
                    <div class="form-group">
                        <label for="server-host">Hôte <span class="required-mark">*</span></label>
                        <input type="text" id="server-host" name="server.host" placeholder="Ex: localhost">
                    </div>
                    <div class="form-group">
                        <label for="server-port">Port <span class="required-mark">*</span></label>
                        <input type="number" id="server-port" name="server.port" placeholder="Ex: 5172">
                    </div>
                </div>
            </div>

            <div class="config-modal-footer">
                <p id="config-error" class="config-error"></p>
                <div class="config-actions">
                    <button id="cancel-config-btn" class="secondary-btn">Annuler</button>
                    <button id="save-config-btn" class="primary-btn">Sauvegarder</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/main.js"></script>
    <script src="/static/i18n.js"></script>
    <script>
        // Helper functions for suggestions
        function usePrompt(text) {
            document.getElementById('prompt-input').value = text;
            document.getElementById('prompt-input').focus();
        }

        function startNewTask() {
            window.location.reload();
        }

        function openSearch() {
            // Placeholder for search functionality
            console.log('Search opened');
        }
    </script>
</body>
</html>
